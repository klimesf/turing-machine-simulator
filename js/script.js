!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DIR_RIGHT="R",e.DIR_LEFT="L",e.STATE_RUNNING="running",e.STATE_STOPPED_FAIL="stopped-fail",e.STATE_STOPPED_SUCCESS="stopped-success",e.BLANK="B"},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e,n,r){a(this,t),this.nextState=e,this.rewrite=n,this.direction=r};e.default=r},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e,n,r,i){a(this,t),this.direction=e,this.highlight=n,this.tape=r,this.newState=i};e.default=r},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),i=n(0),u=n(2),s=function(t){return t&&t.__esModule?t:{default:t}}(u),o=function(){function t(e,n,r,u,s,o){a(this,t),this.states=e,this.finalStates=n,this.head=r,this.state=u,this.transitionFunction=s,this.tape=o,this.running=i.STATE_RUNNING,this.apply=this.apply.bind(this)}return r(t,[{key:"apply",value:function(t){this.tape[this.head]=t.rewrite;var e=this.head;return this.head+=t.direction===i.DIR_LEFT?-1:1,this.state=t.nextState,new s.default(t.direction,e,this.tape,this.state)}}]),t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=function(t,e,n){var r=[],u=document.querySelector(".transition-table > thead > tr");u.innerHTML="";for(var s in t)t.hasOwnProperty(s)&&r.push(s);r.pop();var o=document.createElement("th");o.textContent="-",u.appendChild(o),e.forEach(function(t){var e=document.createElement("th");e.textContent=t,u.appendChild(e)});var c=document.querySelector(".transition-table > tbody");c.innerHTML="",r.forEach(function(n){if(t.hasOwnProperty(n)){var a=document.createElement("tr"),i=document.createElement("th");i.innerHTML="q<sub>"+n+"</sub>",a.appendChild(i),e.forEach(function(e){var i=document.createElement("td");if(t[n].hasOwnProperty(e)){var u=t[n][e],s=u.nextState<r.length?u.nextState:"F";i.innerHTML="q<sub>"+s+"</sub><span>|</span>"+u.rewrite+"<span>|</span>"+u.direction}i.dataset.state=n,i.dataset.symbol=e,i.classList.add("transition"),a.appendChild(i)}),c.appendChild(a)}});var l=function(t){t.addEventListener("click",function(e){if(!t.classList.contains("editing")){var n=t.textContent.length>0?t.textContent:"";t.innerHTML='<input value="'+n+'" type="text"/>',t.classList.add("editing"),document.querySelector("#set-transitions").style.display="inline"}})};document.querySelectorAll("td.transition").forEach(function(t){return l(t)}),document.querySelector("#set-transitions").addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll("td.transition").forEach(function(e){var n=e.querySelector("input");if(n){t.hasOwnProperty(e.dataset.state)||(t[e.dataset.state]={}),t[e.dataset.state].hasOwnProperty[e.dataset.symbol]||(t[e.dataset.state][e.dataset.symbol]={});var r=n.value.split("|"),u=a(r,3),s=u[0],o=u[1],c=u[2];s=s.replace("q",""),t[e.dataset.state][e.dataset.symbol]=new i.default(parseInt(s),o,c),e.classList.remove("editing"),e.innerHTML=n.value,l(e)}}),n.transitionTable=t})};var r=n(1),i=function(t){return t&&t.__esModule?t:{default:t}}(r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.querySelector(".symbols-wrapper");n.innerHTML="";var r=50*t.tape.length;if(document.querySelector(".current-state").innerHTML="q<sub>"+t.newState+"</sub>",t.tape[0]!==a.BLANK){r+=50;var i=document.createElement("div");i.classList.add("symbol"),i.classList.add("blank"),i.textContent=a.BLANK,n.appendChild(i)}if(t.tape.forEach(function(e,a){var r=document.createElement("div");r.classList.add("symbol"),void 0!==t.highlight&&t.highlight===a&&r.classList.add("highlight"),r.textContent=e,n.appendChild(r)}),t.tape[t.tape.length-1]!==a.BLANK){r+=50;var u=document.createElement("div");u.classList.add("symbol"),u.classList.add("blank"),u.textContent=a.BLANK,n.appendChild(u)}n.style.width=r+"px";var s=parseInt(getComputedStyle(n).transform.split(",")[4]);(-1===s||e)&&(s=r/2-25),t.direction===a.DIR_RIGHT?s-=50:t.direction===a.DIR_LEFT&&(s+=50),n.style.transform="translateX("+s+"px)"};var a=n(0),r=n(2);!function(t){t&&t.__esModule}(r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.state,n="B";t.head>=0&&t.head<t.tape.length&&(n=t.tape[t.head]);var r=t.transitionFunction[e];return t.finalStates.indexOf(e)>-1?(console.log("Machine stopped successfuly"),{machineStep:null,running:a.STATE_STOPPED_SUCCESS}):r.hasOwnProperty(n)?{machineStep:r[n],running:a.STATE_RUNNING}:(console.log("Machine stopped because of undefined transition from the current state"),{machineStep:null,running:a.STATE_STOPPED_FAIL})};var a=n(0),r=n(1);!function(t){t&&t.__esModule}(r)},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var r=n(0),i=n(5),u=a(i),s=n(6),o=a(s),c=n(3),l=a(c),d=n(1),f=a(d),p=n(2),h=a(p),v=n(4),y=a(v),S={0:{a:new f.default(1,"a",r.DIR_RIGHT)},1:{a:new f.default(1,"a",r.DIR_RIGHT),b:new f.default(2,"b",r.DIR_RIGHT)},2:{b:new f.default(2,"b",r.DIR_RIGHT),c:new f.default(3,"c",r.DIR_RIGHT)},3:{c:new f.default(3,"c",r.DIR_RIGHT),B:new f.default(4,r.BLANK,r.DIR_LEFT)},4:{}},T=["a","b","c","B"],_=window.input||["a","a","b","b","c"],m=[0,1,2,3,4],b=[4],E=new l.default(m,b,0,0,S,_.slice()),w=!0,L=function(t){E.head=0,E.state=0,E.tape=t.slice(),E.running=r.STATE_RUNNING;var e=document.querySelector(".state");e.classList.remove("fail"),e.textContent="",(0,u.default)(new h.default(r.DIR_RIGHT,void 0,E.tape,0),!0)};document.onkeypress=function(t){if("KeyR"===t.code){if(!w)return;return w=!1,L(window.input||_),void setTimeout(function(){w=!0},100)}if("Space"===t.code){if(!w)return;if(E.running!==r.STATE_RUNNING)return;w=!1;var e=(0,o.default)(E),n=e.machineStep,a=e.running,i=null;switch(a){case r.STATE_STOPPED_FAIL:E.running=r.STATE_STOPPED_FAIL,i=document.querySelector(".state"),i.classList.add("fail"),i.textContent="Machine stopped unsuccessfully";break;case r.STATE_STOPPED_SUCCESS:E.running=r.STATE_STOPPED_SUCCESS,i=document.querySelector(".state"),i.classList.add("success"),i.textContent="Machine stopped successfully";break;case r.STATE_RUNNING:var s=E.apply(n);(0,u.default)(s);break;default:console.err("Unknown machine state")}return void setTimeout(function(){w=!0},100)}},document.querySelector("#editor > a.banner").addEventListener("click",function(t){var e=document.querySelector("#editor");e.classList.contains("active")?e.style.right="-550px":e.style.right="0",e.classList.toggle("active")}),document.querySelector("#machine-input").value=_.join("");var I=document.querySelector("#reset");I.addEventListener("click",function(t){t.preventDefault(),I.blur();var e=_=document.querySelector("#machine-input").value;"tourette"===e?(_="fuck".split(""),E=new l.default([0,1,2,3,4],[4],0,0,{0:{f:new f.default(1,"s",r.DIR_RIGHT)},1:{u:new f.default(2,"h",r.DIR_RIGHT)},2:{c:new f.default(3,"i",r.DIR_RIGHT)},3:{k:new f.default(4,"t",r.DIR_RIGHT)}},_.slice())):_=e.split(""),T=_.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]),T.push(r.BLANK),L(_),(0,y.default)(S,T,E)}),(0,y.default)(S,T,E),document.querySelector("#add-state").addEventListener("click",function(t){t.preventDefault();var e=m.reduce(function(t,e){return e>t?e:t},0)+1;m.push(e),S[e]={},E.transitionTable=S,E.finalStates=[e],(0,y.default)(S,T,E)}),window.reset=L}]);